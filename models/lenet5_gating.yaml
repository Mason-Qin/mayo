---
dataset:
    background_class: {use: false}
    preprocess:
        shape:
            height: 28
            width: 28
            channels: 1
        validate: null
        final_cpu: {type: linear_map, scale: 2.0, shift: -1.0}
model:
    name: lenet5
    layers:
        _init: &init
            weights_initializer:
                type: tensorflow.truncated_normal_initializer
                stddev: 0.09
            trainable: false
        conv0: &gated_conv
            <<: *init
            type: gated_convolution
            kernel_size: 5
            padding: valid
            num_outputs: 20
            gates_regularizer:
                type: tensorflow.contrib.layers.l1_regularizer
                scale: 0.0005
        pool0: &pool
            type: max_pool
            kernel_size: 2
            stride: 2
            padding: valid
        pool1: *pool
        conv1: {<<: *gated_conv, num_outputs: 50}
        flatten1: {type: flatten}
        dropout1: {type: dropout, keep_prob: 0.5}
        fc1: &fc {<<: *init, type: fully_connected, num_outputs: 500}
        logits: {<<: *fc, activation_fn: null, num_outputs: num_classes}
    graph:
        from: input
        with: [conv0, pool0, conv1, pool1, flatten1, dropout1, fc1, logits]
        to: output
