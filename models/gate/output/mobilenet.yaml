---
_import: ../../mobilenet.yaml
_gate:
  trainable: false
model:
    name: mobilenet_v1
    layers:
        _gated_conv: &gated_conv
            type: gated_convolution
            density: 0.5
            trainable: $(_gate.trainable)
            online: true
            weight: 0.0001
        _dsconv: &dsconv
            kwargs: {should_gate: null, trainable: null}
            layers:
                depthwise: {trainable: ^(trainable)}
                pointwise: {<<: *gated_conv, should_gate: ^(should_gate), trainable: ^(trainable)}
        conv0: {<<: *gated_conv, should_gate: false, trainable: $(_gate.trainable)}
        conv1: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv2: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv3: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv4: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv5: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv6: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv7: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv8: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv9: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv10: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv11: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv12: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        conv13: {<<: *dsconv, should_gate: false, trainable: $(_gate.trainable)}
        fc: {trainable: $(_gate.trainable)}
        # conv2: {<<: *dsconv}
        # conv3: {<<: *dsconv}
        # conv4: {<<: *dsconv}
        # conv5: {<<: *dsconv}
        # conv6: {<<: *dsconv}
        # conv7: {<<: *dsconv}
        # conv8: {<<: *dsconv}
        # conv9: {<<: *dsconv}
        # conv10: {<<: *dsconv}
        # conv11: {<<: *dsconv}
        # conv12: {<<: *dsconv}
        # conv13: {<<: *dsconv}
