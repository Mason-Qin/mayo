---
_import: ../../cifarnet.yaml
_gate:
    # online: true
    # online: false
    policy: 'not-online'
    density: 1.0
    trainable: false
    pool: 'avg'
model:
    description: |
        A variant of cifarnet that performs online gating.
    layers:
        _gated_conv: &gated_conv
            type: gated_convolution
            policy: $(_gate.policy)
            granularity: channel
            density: $(_gate.density)
            trainable: $(_gate.trainable)
            pool: $(_gate.pool)
            should_gate: true
            weight: 0.000001
        conv0: {<<: *gated_conv}
        conv1: {<<: *gated_conv}
        conv2: {<<: *gated_conv}
        conv3: {<<: *gated_conv}
        conv4: {<<: *gated_conv}
        conv5: {<<: *gated_conv}
        conv6: {<<: *gated_conv}
        conv7: {<<: *gated_conv}
