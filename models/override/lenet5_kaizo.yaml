---
model.layers:
    _incremental: &incremental
        type: mayo.override.IncrementalQuantizer
        intervals: [0.5, 0.75, 1]
        quantizer:
            type: mayo.override.ShiftQuantizer
            width: 4
            bias: 10
            overflow_rate: 0.0
            should_update: true
            # type: mayo.override.Recentralizer
            # quantizer:
            #     type: mayo.override.FixedPointQuantizer
            #     width: 2
            #     point: 0
            # mean_quantizer:
            #     type: mayo.override.FixedPointQuantizer
            #     width: 2
            #     point: 1
    _mixed: &mixed
        type: mayo.override.MixedPrecisionQuantizer
        intervals: [0.25, 0.5, 0.75, 1]
        reg_factor: 0.001
        quantizers:
            quantizer1:
              type: mayo.override.FixedPointQuantizer
              width: 2
              point: 0
            quantizer2:
              type: mayo.override.FixedPointQuantizer
              width: 8
              point: 0
        picked_quantizer: quantizer1
    _overrider: &playground
        # - *incremental
        - *mixed
        # - {type: mayo.override.EmptyOverrider}
        # - {type: mayo.override.DynamicNetworkSurgeryPruner}
        # - {type: mayo.override.FixedPointQuantizer}
        # - {type: mayo.override.RandomChannelGater, ratio: 0.5}
        # - {type: mayo.override.ChannelGater, alpha: 0.1, threshold: 0.3}
    conv0: &overrider
        weights_overrider: *playground
        biases_overrider: *playground
        # activation_overrider: *quantizer
        # activation_overrider:
        #     type: mayo.override.ChannelPruner
        #     density: 0.1
        #     should_update: true
    conv1: {<<: *overrider}
