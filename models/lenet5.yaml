---
dataset:
    background_class: {use: false}
    preprocess:
        shape:
            height: 28
            width: 28
            channels: 1
        validate: null
        final: {type: linear_map, scale: 2.0, shift: -1.0}
model:
    name: lenet5
    hyper:
        - &init
          weights_initializer:
              type: tensorflow.truncated_normal_initializer
              stddev: 0.09
        - &conv
          type: convolution
          kernel_size: 5
          padding: valid
          <<: *init
        - &pool
          type: max_pool
          kernel_size: 2
          stride: 2
          padding: valid
        - &dropout {type: dropout, keep_prob: 0.5}
        - &fc
          type: fully_connected
          <<: *init
    net:
        - {name: conv0, <<: *conv, num_outputs: 20}
        - {name: pool0, <<: *pool}
        - {name: conv1, <<: *conv, num_outputs: 50}
        - {name: pool1, <<: *pool}
        - {name: flatten, type: flatten}
        - {name: dropout, <<: *dropout}
        - {name: fc1, <<: *fc, num_outputs: 500}
        - {name: logits, <<: *fc, activation_fn: null,
           num_outputs: num_classes}
    logits: logits
