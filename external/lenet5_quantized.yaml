---
name: lenet5
dataset:
    background_class: {use: false}
    preprocess:
        shape:
            height: 28
            width: 28
            channels: 1
        validate: []
        final: [{type: linear_map, scale: 2.0, shift: -1.0}]
logits: logits
hyper:
    - &common
      weights_initializer:
          type: tensorflow.truncated_normal_initializer
          stddev: 0.09
      weights_overrider: &overrider
          type: mayo.override.FixedPointQuantizer
          integer_width: 1
          fractional_width: 4
      biases_overrider: *overrider
    - &conv
      type: convolution
      kernel_size: 5
      <<: *common
    - &pool
      type: max_pool
      kernel_size: 2
      stride: 2
    - &dropout {type: dropout, keep_prob: 0.5}
    - &fc
      type: fully_connected
      <<: *common
net:
    - {name: conv0, <<: *conv, num_outputs: 32}
    - {name: pool0, <<: *pool}
    - {name: conv1, <<: *conv, num_outputs: 64}
    - {name: pool1, <<: *pool}
    - {name: flatten, type: flatten}
    - {name: dropout, <<: *dropout}
    - {name: fc1, <<: *fc, num_outputs: 512}
    - {name: logits, <<: *fc, activation_fn: null, num_outputs: num_classes}
